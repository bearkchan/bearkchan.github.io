<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Javaä¸­å¤šçº¿ç¨‹çš„ä½¿ç”¨ - BK - Coding the world</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Bearkchan" /><meta name="description" content="" /><meta name="keywords" content="bearkchan, java, php" />






<meta name="generator" content="Hugo 0.81.0 with theme even" />


<link rel="canonical" href="https://bearkchan.github.io/post/java%E9%AB%98%E7%BA%A7%E7%9F%A5%E8%AF%86/001-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BD%BF%E7%94%A8/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.6a025d60334ccde9f765dedcf6936f4c2eb3ea8d22276e9f389bb2efc2d55e11.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Javaä¸­å¤šçº¿ç¨‹çš„ä½¿ç”¨" />
<meta property="og:description" content="" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bearkchan.github.io/post/java%E9%AB%98%E7%BA%A7%E7%9F%A5%E8%AF%86/001-%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E4%BD%BF%E7%94%A8/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-03-13T03:01:11&#43;08:00" />
<meta property="article:modified_time" content="2021-03-13T03:01:11&#43;08:00" />

<meta itemprop="name" content="Javaä¸­å¤šçº¿ç¨‹çš„ä½¿ç”¨">
<meta itemprop="description" content=""><meta itemprop="datePublished" content="2021-03-13T03:01:11&#43;08:00" />
<meta itemprop="dateModified" content="2021-03-13T03:01:11&#43;08:00" />
<meta itemprop="wordCount" content="6100">
<meta itemprop="keywords" content="java,é”,åŒæ­¥,å¤šçº¿ç¨‹," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Javaä¸­å¤šçº¿ç¨‹çš„ä½¿ç”¨"/>
<meta name="twitter:description" content=""/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">BK&#39;s BLOG</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">ä¸»é¡µ</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">å½’æ¡£</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">æ ‡ç­¾</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">åˆ†ç±»</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">BK&#39;s BLOG</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">ä¸»é¡µ</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">å½’æ¡£</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">æ ‡ç­¾</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">åˆ†ç±»</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Javaä¸­å¤šçº¿ç¨‹çš„ä½¿ç”¨</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-03-13 </span>
        <div class="post-category">
            <a href="/categories/java/"> java </a>
            </div>
          <span class="more-meta"> çº¦ 6100 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 13 åˆ†é’Ÿ </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-ç¨‹åºè¿›ç¨‹çº¿ç¨‹çš„ç†è§£">1. ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„ç†è§£</a>
          <ul>
            <li><a href="#11-ç¨‹åºprogram">1.1 ç¨‹åºï¼ˆprogramï¼‰</a></li>
            <li><a href="#12-è¿›ç¨‹process">1.2 è¿›ç¨‹ï¼ˆprocessï¼‰</a></li>
            <li><a href="#13-çº¿ç¨‹thread">1.3 çº¿ç¨‹ï¼ˆthreadï¼‰</a></li>
            <li><a href="#14-è¡¥å……">1.4 è¡¥å……</a></li>
          </ul>
        </li>
        <li><a href="#2-å¹¶è¡Œä¸å¹¶å‘">2. å¹¶è¡Œä¸å¹¶å‘</a>
          <ul>
            <li><a href="#21-å•æ ¸cpuä¸å¤šæ ¸cpuçš„ç†è§£">2.1 å•æ ¸CPUä¸å¤šæ ¸CPUçš„ç†è§£</a></li>
            <li><a href="#22-å¹¶è¡Œå’Œå¹¶å‘çš„ç†è§£">2.2 å¹¶è¡Œå’Œå¹¶å‘çš„ç†è§£</a></li>
          </ul>
        </li>
        <li><a href="#3-åˆ›å»ºå¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼">3. åˆ›å»ºå¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</a>
          <ul>
            <li><a href="#31-æ–¹å¼ä¸€ç»§æ‰¿threadç±»çš„æ–¹å¼">3.1 æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»çš„æ–¹å¼</a></li>
            <li><a href="#32-æ–¹å¼äºŒå®ç°runnableæ¥å£çš„æ–¹å¼">3.2 æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£çš„æ–¹å¼</a></li>
            <li><a href="#33-ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”">3.3 ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”</a></li>
          </ul>
        </li>
        <li><a href="#4-threadç±»ä¸­çš„å¸¸ç”¨æ–¹æ³•">4. THreadç±»ä¸­çš„å¸¸ç”¨æ–¹æ³•</a></li>
        <li><a href="#5-threadçš„ç”Ÿå‘½å‘¨æœŸ">5. Threadçš„ç”Ÿå‘½å‘¨æœŸ</a></li>
        <li><a href="#6-çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶">6. çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶</a>
          <ul>
            <li><a href="#61-æ–¹å¼ä¸€åŒæ­¥ä»£ç å—">6.1 æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—</a></li>
            <li><a href="#62-æ–¹å¼äºŒåŒæ­¥æ–¹æ³•">6.2 æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³•</a></li>
            <li><a href="#63-æ–¹å¼ä¸‰locké”---jdk50æ–°å¢">6.3 æ–¹å¼ä¸‰ï¼šLocké”&mdash;JDK5.0æ–°å¢</a></li>
            <li><a href="#61-çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼æ‡’æ±‰å¼">6.1 çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼ˆæ‡’æ±‰å¼ï¼‰</a></li>
            <li><a href="#62-æ­»é”é—®é¢˜">6.2 æ­»é”é—®é¢˜</a></li>
          </ul>
        </li>
        <li><a href="#7-çº¿ç¨‹é€šä¿¡">7. çº¿ç¨‹é€šä¿¡</a>
          <ul>
            <li><a href="#71-çº¿ç¨‹é€šä¿¡æ¶‰åŠåˆ°çš„ä¸‰ä¸ªæ–¹æ³•">7.1 çº¿ç¨‹é€šä¿¡æ¶‰åŠåˆ°çš„ä¸‰ä¸ªæ–¹æ³•</a></li>
            <li><a href="#72-sleepå’Œwaitçš„å¼‚åŒ">7.2 sleep()å’Œwait()çš„å¼‚åŒ</a></li>
            <li><a href="#73-é‡Šæ”¾é”çš„æ“ä½œ">7.3 é‡Šæ”¾é”çš„æ“ä½œ</a></li>
            <li><a href="#74-ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ">7.4 ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ</a></li>
          </ul>
        </li>
        <li><a href="#8-jdk50æ–°å¢çº¿ç¨‹åˆ›å»ºçš„æ–¹å¼">8. JDK5.0æ–°å¢çº¿ç¨‹åˆ›å»ºçš„æ–¹å¼</a>
          <ul>
            <li><a href="#81-æ–°å¢æ–¹å¼ä¸€å®ç°callableæ¥å£">8.1 æ–°å¢æ–¹å¼ä¸€ï¼šå®ç°Callableæ¥å£</a></li>
            <li><a href="#82-æ–°å¢æ–¹å¼äºŒä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼">8.2 æ–°å¢æ–¹å¼äºŒï¼šä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="1-ç¨‹åºè¿›ç¨‹çº¿ç¨‹çš„ç†è§£">1. ç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹çš„ç†è§£</h2>
<h3 id="11-ç¨‹åºprogram">1.1 ç¨‹åºï¼ˆprogramï¼‰</h3>
<p>æ˜¯ä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚å³æŒ‡<strong>ä¸€æ®µé™æ€çš„ä»£ç </strong>ã€‚</p>
<h3 id="12-è¿›ç¨‹process">1.2 è¿›ç¨‹ï¼ˆprocessï¼‰</h3>
<p>ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–æ˜¯<strong>æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åº</strong>ã€‚</p>
<blockquote>
<p>è¿›ç¨‹ä½œä¸º<strong>èµ„æºåˆ†é…çš„å•ä½</strong>ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜åŒºåŸŸã€‚</p>
</blockquote>
<h3 id="13-çº¿ç¨‹thread">1.3 çº¿ç¨‹ï¼ˆthreadï¼‰</h3>
<p>è¿›ç¨‹å¯è¿›ä¸€æ­¥ç»†åŒ–ä¸ºçº¿ç¨‹ï¼Œæ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚</p>
<blockquote>
<p><strong>çº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œæ‰§è¡Œçš„å•ä½ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨(pc)</strong>ï¼Œçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å°ã€‚</p>
</blockquote>
<p><img src="http://cdn.bearkchan.top/img1.jpg" alt="img"></p>
<h3 id="14-è¡¥å……">1.4 è¡¥å……</h3>
<p>å†…å­˜ç»“æ„å›¾ï¼š</p>
<p><img src="http://cdn.bearkchan.top/image-20210313134552419.png" alt="image-20210313134552419"></p>
<p>è¿›ç¨‹å¯ä»¥ç»†åŒ–ä¸ºå¤šä¸ªçº¿ç¨‹ã€‚</p>
<p>æ¯ä¸ªçº¿ç¨‹ï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„ï¼šæ ˆã€ç¨‹åºè®¡æ•°å™¨ã€‚</p>
<p>å¤šä¸ªçº¿ç¨‹ï¼Œå…±äº«åŒä¸€ä¸ªè¿›ç¨‹çš„ç»“æ„ï¼šæ–¹æ³•åŒºã€å †ã€‚</p>
<h2 id="2-å¹¶è¡Œä¸å¹¶å‘">2. å¹¶è¡Œä¸å¹¶å‘</h2>
<h3 id="21-å•æ ¸cpuä¸å¤šæ ¸cpuçš„ç†è§£">2.1 å•æ ¸CPUä¸å¤šæ ¸CPUçš„ç†è§£</h3>
<ul>
<li>
<p><strong>å•æ ¸CPU</strong>å…¶å®æ˜¯ä¸€ç§å‡çš„å¤šçº¿ç¨‹ï¼Œå› ä¸ºåœ¨ä¸€ä¸ªæ—¶é—´å•å…ƒå†…ï¼Œä¹Ÿåªèƒ½æ‰§è¡Œä¸€ä¸ªçº¿ç¨‹çš„ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼šè™½ç„¶æœ‰å¤šè½¦é“ï¼Œä½†æ˜¯æ”¶è´¹ç«™åªæœ‰ä¸€ä¸ªå·¥ä½œäººå‘˜åœ¨æ”¶è´¹ï¼Œåªæœ‰æ”¶äº†è´¹æ‰èƒ½é€šè¿‡ï¼Œé‚£ä¹ˆCPUå°±å¥½æ¯”æ”¶è´¹äººå‘˜ã€‚å¦‚æœæŸä¸ªäººä¸æƒ³äº¤é’±ï¼Œé‚£ä¹ˆæ”¶è´¹äººå‘˜å¯ä»¥æŠŠä»–â€œæŒ‚èµ·â€ï¼ˆæ™¾ç€ä»–ï¼Œç­‰ä»–æƒ³é€šäº†ï¼Œå‡†å¤‡å¥½äº†é’±ï¼Œå†å»æ”¶è´¹ã€‚ï¼‰ä½†æ˜¯å› ä¸ºCPUæ—¶é—´å•å…ƒç‰¹åˆ«çŸ­ï¼Œå› æ­¤æ„Ÿè§‰ä¸å‡ºæ¥ã€‚</p>
</li>
<li>
<p>å¦‚æœæ˜¯å¤šæ ¸çš„è¯ï¼Œæ‰èƒ½æ›´å¥½çš„å‘æŒ¥å¤šçº¿ç¨‹çš„æ•ˆç‡ã€‚ï¼ˆç°åœ¨çš„æœåŠ¡å™¨éƒ½æ˜¯å¤šæ ¸çš„ï¼‰</p>
</li>
</ul>
<h3 id="22-å¹¶è¡Œå’Œå¹¶å‘çš„ç†è§£">2.2 å¹¶è¡Œå’Œå¹¶å‘çš„ç†è§£</h3>
<ul>
<li>å¹¶è¡Œï¼šå¤šä¸ªCPUåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚ï¼šå¤šä¸ªäººåŒæ—¶åšä¸åŒçš„äº‹æƒ…ã€‚</li>
<li>å¹¶å‘ï¼šä¸€ä¸ªCPUï¼ˆé‡‡ç”¨æ—¶é—´ç‰‡ï¼‰åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚ï¼šç§’æ€ã€å¤šä¸ªäººåšåŒä¸€ä»¶äº‹ã€‚</li>
</ul>
<h2 id="3-åˆ›å»ºå¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼">3. åˆ›å»ºå¤šçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼</h2>
<h3 id="31-æ–¹å¼ä¸€ç»§æ‰¿threadç±»çš„æ–¹å¼">3.1 æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»çš„æ–¹å¼</h3>
<ol>
<li>
<p>åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºThreadç±»çš„å­ç±»</p>
</li>
<li>
<p>é‡å†™Threadç±»çš„run() &ndash;&gt;å°†æ­¤çº¿ç¨‹æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨run()ä¸­</p>
</li>
<li>
<p>åˆ›å»ºThreadç±»çš„å­ç±»çš„å¯¹è±¡</p>
</li>
<li>
<p>é€šè¿‡æ­¤å¯¹è±¡è°ƒç”¨start()ï¼š</p>
<p>â‘ å¯åŠ¨å½“å‰çº¿ç¨‹</p>
<p>â‘¡è°ƒç”¨å½“å‰çº¿ç¨‹çš„run()</p>
</li>
</ol>
<blockquote>
<p>è¯´æ˜ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<p>é—®é¢˜ä¸€ï¼šæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¿…é¡»è°ƒç”¨start()ï¼Œä¸èƒ½è°ƒç”¨run()çš„æ–¹å¼å¯åŠ¨çº¿ç¨‹ã€‚</p>
<p>é—®é¢˜äºŒï¼šå¦‚æœå†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œå¿…é¡»é‡æ–°åˆ›å»ºä¸€ä¸ªThreadå­ç±»çš„å¯¹è±¡ï¼Œè°ƒç”¨æ­¤å¯¹è±¡çš„start()ã€‚</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//1. åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºThreadç±»çš„å­ç±»
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">MyThread</span> <span class="kd">extends</span> <span class="n">Thread</span> <span class="o">{</span>
  <span class="c1">//2. é‡å†™Threadç±»çš„run()
</span><span class="c1"></span>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//3. åˆ›å»ºThreadç±»çš„å­ç±»çš„å¯¹è±¡
</span><span class="c1"></span>    <span class="n">MyThread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">();</span>

    <span class="c1">//4.é€šè¿‡æ­¤å¯¹è±¡è°ƒç”¨start():â‘ å¯åŠ¨å½“å‰çº¿ç¨‹ â‘¡ è°ƒç”¨å½“å‰çº¿ç¨‹çš„run()
</span><span class="c1"></span>    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">MyThread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MyThread</span><span class="o">();</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>


    <span class="c1">//å¦‚ä¸‹æ“ä½œä»ç„¶æ˜¯åœ¨mainçº¿ç¨‹ä¸­æ‰§è¡Œçš„ã€‚
</span><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span> <span class="o">+</span> <span class="n">i</span> <span class="o">+</span> <span class="s">&#34;***********main()************&#34;</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="32-æ–¹å¼äºŒå®ç°runnableæ¥å£çš„æ–¹å¼">3.2 æ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£çš„æ–¹å¼</h3>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå®ç°äº†Runnableæ¥å£çš„ç±»</li>
<li>å®ç°ç±»å»å®ç°Runnableæ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼šrun()</li>
<li>åˆ›å»ºå®ç°ç±»çš„å¯¹è±¡</li>
<li>å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadç±»çš„å¯¹è±¡</li>
<li>é€šè¿‡Threadç±»çš„å¯¹è±¡è°ƒç”¨start()</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//1. åˆ›å»ºä¸€ä¸ªå®ç°äº†Runnableæ¥å£çš„ç±»
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">MThread</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

  <span class="c1">//2. å®ç°ç±»å»å®ç°Runnableä¸­çš„æŠ½è±¡æ–¹æ³•ï¼šrun()
</span><span class="c1"></span>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;:&#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
      <span class="o">}</span>

    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadTest1</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//3. åˆ›å»ºå®ç°ç±»çš„å¯¹è±¡
</span><span class="c1"></span>    <span class="n">MThread</span> <span class="n">mThread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MThread</span><span class="o">();</span>
    <span class="c1">//4. å°†æ­¤å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadç±»çš„å¯¹è±¡
</span><span class="c1"></span>    <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">mThread</span><span class="o">);</span>
    <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çº¿ç¨‹1&#34;</span><span class="o">);</span>
    <span class="c1">//5. é€šè¿‡Threadç±»çš„å¯¹è±¡è°ƒç”¨start():â‘  å¯åŠ¨çº¿ç¨‹ â‘¡è°ƒç”¨å½“å‰çº¿ç¨‹çš„run()--&gt;è°ƒç”¨äº†Runnableç±»å‹çš„targetçš„run()
</span><span class="c1"></span>    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>

    <span class="c1">//å†å¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œéå†100ä»¥å†…çš„å¶æ•°
</span><span class="c1"></span>    <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">mThread</span><span class="o">);</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çº¿ç¨‹2&#34;</span><span class="o">);</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="33-ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”">3.3 ä¸¤ç§æ–¹å¼çš„å¯¹æ¯”</h3>
<blockquote>
<p>åœ¨å¼€å‘ä¸­ï¼Œä¼˜å…ˆé€‰æ‹©å®ç°Runnableæ¥å£çš„æ–¹å¼</p>
</blockquote>
<p><strong>åŸå› ï¼š</strong></p>
<ol>
<li>å®ç°çš„æ–¹å¼æ²¡æœ‰ç±»çš„å•ç»§æ‰¿çš„å±€é™æ€§ã€‚</li>
<li>å®ç°çš„æ–¹å¼æ›´é€‚åˆæ¥å¤„ç†å¤šä¸ªå¤šçº¿ç¨‹å…±äº«æ•°æ®çš„æƒ…å†µã€‚</li>
</ol>
<p><strong>æ–¹å¼ä¸€å’Œæ–¹å¼äºŒçš„è”ç³»ï¼š</strong></p>
<p>å®é™…ä¸ŠThreadç±»æœ¬èº«å°±å®ç°äº†Runnableæ¥å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Thread</span> <span class="kd">implements</span> <span class="n">Runnable</span>
</code></pre></td></tr></table>
</div>
</div><p>ç›¸åŒç‚¹ï¼šä¸¤ç§æ–¹å¼éƒ½åœ¨éœ€è¦é‡å†™run()æ–¹æ³•ï¼Œå°†çº¿ç¨‹è¦æ‰§è¡Œçš„é€»è¾‘å£°æ˜åœ¨run()ä¸­ã€‚</p>
<p>ç›®å‰ä¸¤ç§æ–¹å¼ï¼Œæƒ³è¦å¯åŠ¨çº¿ç¨‹ï¼Œéƒ½æ˜¯è°ƒç”¨çš„Threadç±»çš„start()ã€‚</p>
<h2 id="4-threadç±»ä¸­çš„å¸¸ç”¨æ–¹æ³•">4. THreadç±»ä¸­çš„å¸¸ç”¨æ–¹æ³•</h2>
<ol>
<li>start():å¯åŠ¨å½“å‰çº¿ç¨‹ï¼›è°ƒç”¨å½“å‰çº¿ç¨‹çš„run()</li>
<li>run(): é€šå¸¸éœ€è¦é‡å†™Threadç±»ä¸­çš„æ­¤æ–¹æ³•ï¼Œå°†åˆ›å»ºçš„çº¿ç¨‹è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨æ­¤æ–¹æ³•ä¸­</li>
<li>currentThread():é™æ€æ–¹æ³•ï¼Œè¿”å›æ‰§è¡Œå½“å‰ä»£ç çš„çº¿ç¨‹</li>
<li>getName():è·å–å½“å‰çº¿ç¨‹çš„åå­—</li>
<li>setName():è®¾ç½®å½“å‰çº¿ç¨‹çš„åå­—</li>
<li>yield():é‡Šæ”¾å½“å‰cpuçš„æ‰§è¡Œæƒ</li>
<li>join():åœ¨çº¿ç¨‹aä¸­è°ƒç”¨çº¿ç¨‹bçš„join(),æ­¤æ—¶çº¿ç¨‹aå°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç›´åˆ°çº¿ç¨‹bå®Œå…¨æ‰§è¡Œå®Œä»¥åï¼Œçº¿ç¨‹aæ‰ç»“æŸé˜»å¡çŠ¶æ€ã€‚</li>
<li>stop():å·²è¿‡æ—¶ã€‚å½“æ‰§è¡Œæ­¤æ–¹æ³•æ—¶ï¼Œå¼ºåˆ¶ç»“æŸå½“å‰çº¿ç¨‹ã€‚</li>
<li>sleep(long millitime):è®©å½“å‰çº¿ç¨‹â€œç¡çœ â€æŒ‡å®šçš„millitimeæ¯«ç§’ã€‚åœ¨æŒ‡å®šçš„millitimeæ¯«ç§’æ—¶é—´å†…ï¼Œå½“å‰çº¿ç¨‹æ˜¯é˜»å¡çŠ¶æ€ã€‚</li>
<li>isAlive():åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯å¦å­˜æ´»</li>
</ol>
<p><strong>çº¿ç¨‹çš„ä¼˜å…ˆçº§åŒ…æ‹¬ï¼š</strong></p>
<ul>
<li>MAX_PRIORITYï¼š10</li>
<li>MIN _PRIORITYï¼š1</li>
<li>NORM_PRIORITYï¼š5  &ndash;&gt;é»˜è®¤ä¼˜å…ˆçº§</li>
</ul>
<p><strong>å¦‚ä½•è·å–å’Œè®¾ç½®å½“å‰çº¿ç¨‹çš„ä¼˜å…ˆçº§ï¼š</strong></p>
<ul>
<li>getPriority():è·å–çº¿ç¨‹çš„ä¼˜å…ˆçº§</li>
<li>setPriority(int p):è®¾ç½®çº¿ç¨‹çš„ä¼˜å…ˆçº§</li>
</ul>
<blockquote>
<p>è¯´æ˜ï¼šé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹è¦æŠ¢å ä½ä¼˜å…ˆçº§çº¿ç¨‹cpuçš„æ‰§è¡Œæƒã€‚ä½†æ˜¯åªæ˜¯ä»æ¦‚ç‡ä¸Šè®²ï¼Œé«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹é«˜æ¦‚ç‡çš„æƒ…å†µä¸‹è¢«æ‰§è¡Œã€‚å¹¶ä¸æ„å‘³ç€åªå½“é«˜ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰§è¡Œå®Œä»¥åï¼Œä½ä¼˜å…ˆçº§çš„çº¿ç¨‹æ‰æ‰§è¡Œã€‚</p>
</blockquote>
<p><strong>è¡¥å……è¯´æ˜:</strong>
çº¿ç¨‹åˆ†ä¸ºå®ˆæŠ¤çº¿ç¨‹å’Œç”¨æˆ·çº¿ç¨‹ä¸¤ç§ã€‚</p>
<h2 id="5-threadçš„ç”Ÿå‘½å‘¨æœŸ">5. Threadçš„ç”Ÿå‘½å‘¨æœŸ</h2>
<p><img src="http://cdn.bearkchan.top/image-20210313144920000.png" alt="image-20210313144920000"></p>
<p>è¯´æ˜ï¼š</p>
<ol>
<li>
<p>ç”Ÿå‘½å‘¨æœŸå…³æ³¨ä¸¤ä¸ªæ¦‚å¿µï¼šçŠ¶æ€ã€ç›¸åº”çš„æ–¹æ³•</p>
</li>
<li>
<p>å…³æ³¨ï¼š</p>
<ul>
<li>çŠ¶æ€a&ndash;&gt;çŠ¶æ€b:å“ªäº›æ–¹æ³•æ‰§è¡Œäº†ï¼ˆå›è°ƒæ–¹æ³•ï¼‰</li>
<li>æŸä¸ªæ–¹æ³•ä¸»åŠ¨è°ƒç”¨ï¼šçŠ¶æ€a&ndash;&gt;çŠ¶æ€b</li>
</ul>
</li>
<li>
<p>é˜»å¡ï¼šä¸´æ—¶çŠ¶æ€ï¼Œä¸å¯ä»¥ä½œä¸ºæœ€ç»ˆçŠ¶æ€</p>
</li>
<li>
<p>æ­»äº¡ï¼šæœ€ç»ˆçŠ¶æ€</p>
</li>
</ol>
<h2 id="6-çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶">6. çº¿ç¨‹çš„åŒæ­¥æœºåˆ¶</h2>
<p><strong>èƒŒæ™¯ï¼š</strong></p>
<p>çª—å£ä¹°ç¥¨è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†é‡ç¥¨ã€é”™ç¥¨çš„æ—¶å€™ï¼Œå³å‡ºç°äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</p>
<p><strong>é—®é¢˜å‡ºç°çš„åŸå› ï¼š</strong></p>
<p>å½“æŸä¸ªçº¿ç¨‹æ“ä½œè½¦ç¥¨çš„è¿‡ç¨‹ä¸­ï¼Œå°šæœªæ“ä½œå®Œæˆæ—¶ï¼Œå…¶ä»–çš„çº¿ç¨‹å‚ä¸è¿›æ¥ï¼Œä¹Ÿæ“ä½œäº†è½¦ç¥¨ã€‚</p>
<p><strong>å¦‚ä½•è§£å†³ï¼š</strong>
å½“ä¸€ä¸ªçº¿ç¨‹aåœ¨æ“ä½œticketçš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å‚ä¸è¿›æ¥ã€‚ç›´åˆ°çº¿ç¨‹aæ“ä½œå®Œticketæ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥å¼€å§‹æ“ä½œticketã€‚è¿™ç§æƒ…å†µå³ä½¿çº¿ç¨‹aå‡ºç°äº†é˜»å¡ï¼Œä¹Ÿä¸èƒ½è¢«æ”¹å˜ã€‚</p>
<blockquote>
<p>åœ¨Javaä¸­ï¼Œé€šè¿‡ä½¿ç”¨åŒæ­¥æœºåˆ¶ï¼Œè§£å†³çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚</p>
</blockquote>
<h3 id="61-æ–¹å¼ä¸€åŒæ­¥ä»£ç å—">6.1 æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">synchronized</span><span class="o">(</span><span class="n">åŒæ­¥ç›‘è§†å™¨</span><span class="o">){</span>
  <span class="c1">// éœ€è¦è¢«åŒæ­¥çš„ä»£ç å—
</span><span class="c1"></span><span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¯´æ˜ï¼š</p>
<ol>
<li>æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ï¼Œå³ä¸ºéœ€è¦è¢«åŒæ­¥çš„ä»£ç ã€‚</li>
<li>å…±äº«æ•°æ®ï¼šå¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œçš„å˜é‡ã€‚</li>
<li>åŒæ­¥ç›‘è§†å™¨ï¼šä¿—ç§°ï¼šé”ğŸ”’ï¼Œå¯ä»¥æ˜¯ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œä½†æ˜¯è¦æ±‚å¤šä¸ªçº¿ç¨‹å¿…é¡»å…±ç”¨åŒä¸€æŠŠé”ã€‚</li>
</ol>
<blockquote>
<p>è¡¥å……ï¼š</p>
<ul>
<li>åœ¨å®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥<strong>è€ƒè™‘ä½¿ç”¨thiså……å½“åŒæ­¥ç›‘è§†å™¨ã€‚</strong></li>
<li>åœ¨ç»§æ‰¿Threadç±»åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ä¸­ï¼Œæ…ç”¨thiså……å½“åŒæ­¥ç›‘è§†å™¨ï¼Œ<strong>è€ƒè™‘ä½¿ç”¨å½“å‰ç±»å……å½“åŒæ­¥ç›‘è§†å™¨ã€‚</strong></li>
</ul>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Window1</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">ticket</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
      <span class="kd">synchronized</span> <span class="o">(</span><span class="k">this</span><span class="o">){</span>
        <span class="c1">//æ­¤æ—¶çš„this:å”¯ä¸€çš„Window1çš„å¯¹è±¡  
</span><span class="c1"></span>        <span class="k">if</span> <span class="o">(</span><span class="n">ticket</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">try</span> <span class="o">{</span>
            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
          <span class="o">}</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;:å–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&#34;</span> <span class="o">+</span> <span class="n">ticket</span><span class="o">);</span>
          <span class="n">ticket</span><span class="o">--;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
          <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WindowTest1</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Window1</span> <span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Window1</span><span class="o">();</span>

    <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£1&#34;</span><span class="o">);</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£2&#34;</span><span class="o">);</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£3&#34;</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="62-æ–¹å¼äºŒåŒæ­¥æ–¹æ³•">6.2 æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">methodName</span><span class="o">(){</span>
  
<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæ“ä½œå…±äº«æ•°æ®çš„ä»£ç å®Œæ•´çš„å£°æ˜åœ¨ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸å¦¨å°†æ­¤æ–¹æ³•å£°æ˜åŒæ­¥çš„ã€‚</p>
<ol>
<li>åŒæ­¥æ–¹æ³•ä»ç„¶æ¶‰åŠåˆ°åŒæ­¥ç›‘è§†å™¨ï¼Œåªæ˜¯ä¸éœ€è¦æˆ‘ä»¬æ˜¾å¼çš„å£°æ˜ã€‚</li>
<li>éé™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨æ˜¯ï¼šthis</li>
<li>é™æ€çš„åŒæ­¥æ–¹æ³•ï¼ŒåŒæ­¥ç›‘è§†å™¨æ˜¯ï¼šå½“å‰ç±»æœ¬èº«</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Window3</span> <span class="kd">implements</span> <span class="n">Runnable</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">ticket</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>

      <span class="n">show</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">(){</span><span class="c1">//åŒæ­¥ç›‘è§†å™¨ï¼šthis
</span><span class="c1"></span>    <span class="c1">//synchronized (this){
</span><span class="c1"></span>
    <span class="k">if</span> <span class="o">(</span><span class="n">ticket</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">)</span> <span class="o">{</span>

      <span class="k">try</span> <span class="o">{</span>
        <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
      <span class="o">}</span>

      <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;:å–ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&#34;</span> <span class="o">+</span> <span class="n">ticket</span><span class="o">);</span>

      <span class="n">ticket</span><span class="o">--;</span>
    <span class="o">}</span>
    <span class="c1">//}
</span><span class="c1"></span>  <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WindowTest3</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Window3</span> <span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Window3</span><span class="o">();</span>

    <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£1&#34;</span><span class="o">);</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£2&#34;</span><span class="o">);</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£3&#34;</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="63-æ–¹å¼ä¸‰locké”---jdk50æ–°å¢">6.3 æ–¹å¼ä¸‰ï¼šLocké”&mdash;JDK5.0æ–°å¢</h3>
<p><strong>é¢è¯•é¢˜ï¼šsynchronizedå’ŒLockçš„å¼‚åŒï¼Ÿ</strong></p>
<ul>
<li>ç›¸åŒç‚¹ï¼šäºŒè€…éƒ½å¯ä»¥è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜</li>
<li>ä¸åŒç‚¹ï¼š
<ul>
<li>synchronizedæœºåˆ¶åœ¨æ‰§è¡Œå®Œç›¸åº”çš„åŒæ­¥ä»£ç ä»¥åï¼Œè‡ªåŠ¨çš„é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ã€‚</li>
<li>Lockéœ€è¦æ‰‹åŠ¨çš„å¯åŠ¨åŒæ­¥ï¼ˆlock()ï¼‰ï¼ŒåŒæ—¶ç»“æŸåŒæ­¥ä¹Ÿéœ€è¦æ‰‹åŠ¨çš„å®ç°ï¼ˆunlock()ï¼‰</li>
</ul>
</li>
</ul>
<p><strong>ä½¿ç”¨çš„å…ˆåé¡ºåºï¼š</strong></p>
<ol>
<li>Locké”</li>
<li>åŒæ­¥ä»£ç å—ï¼ˆå·²æ¥è¿›å…¥æ–¹æ³•ä½“ï¼Œåˆ†é…äº†ç›¸åº”çš„èµ„æºï¼‰</li>
<li>åŒæ­¥æ–¹æ³•ï¼ˆåœ¨æ–¹æ³•ä½“å¤–ï¼‰</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Window</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

  <span class="kd">private</span> <span class="kt">int</span> <span class="n">ticket</span> <span class="o">=</span> <span class="n">100</span><span class="o">;</span>
  <span class="c1">//1.å®ä¾‹åŒ–ReentrantLock
</span><span class="c1"></span>  <span class="kd">private</span> <span class="n">ReentrantLock</span> <span class="n">lock</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ReentrantLock</span><span class="o">();</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">){</span>
      <span class="k">try</span><span class="o">{</span>

        <span class="c1">//2.è°ƒç”¨é”å®šæ–¹æ³•lock()
</span><span class="c1"></span>        <span class="n">lock</span><span class="o">.</span><span class="na">lock</span><span class="o">();</span>

        <span class="k">if</span><span class="o">(</span><span class="n">ticket</span> <span class="o">&gt;</span> <span class="n">0</span><span class="o">){</span>

          <span class="k">try</span> <span class="o">{</span>
            <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
          <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
          <span class="o">}</span>

          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;ï¼šå”®ç¥¨ï¼Œç¥¨å·ä¸ºï¼š&#34;</span> <span class="o">+</span> <span class="n">ticket</span><span class="o">);</span>
          <span class="n">ticket</span><span class="o">--;</span>
        <span class="o">}</span><span class="k">else</span><span class="o">{</span>
          <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
      <span class="o">}</span><span class="k">finally</span> <span class="o">{</span>
        <span class="c1">//3.è°ƒç”¨è§£é”æ–¹æ³•ï¼šunlock()
</span><span class="c1"></span>        <span class="n">lock</span><span class="o">.</span><span class="na">unlock</span><span class="o">();</span>
      <span class="o">}</span>

    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">LockTest</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Window</span> <span class="n">w</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Window</span><span class="o">();</span>

    <span class="n">Thread</span> <span class="n">t1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>
    <span class="n">Thread</span> <span class="n">t3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">w</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£1&#34;</span><span class="o">);</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£2&#34;</span><span class="o">);</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="s">&#34;çª—å£3&#34;</span><span class="o">);</span>

    <span class="n">t1</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t2</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="n">t3</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

</code></pre></td></tr></table>
</div>
</div><h3 id="61-çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼æ‡’æ±‰å¼">6.1 çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼ï¼ˆæ‡’æ±‰å¼ï¼‰</h3>
<p>ä½¿ç”¨åŒæ­¥æœºåˆ¶å°†å•ä¾‹æ¨¡å¼ä¸­çš„æ‡’æ±‰å¼æ”¹å†™ä¸ºçº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Bank</span><span class="o">{</span>

  <span class="kd">private</span> <span class="nf">Bank</span><span class="o">(){}</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="n">Bank</span> <span class="n">instance</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="n">Bank</span> <span class="nf">getInstance</span><span class="o">(){</span>
    <span class="c1">//æ–¹å¼ä¸€ï¼šæ•ˆç‡ç¨å·®
</span><span class="c1"></span>    <span class="c1">//        synchronized (Bank.class) {
</span><span class="c1"></span>    <span class="c1">//            if(instance == null){
</span><span class="c1"></span>    <span class="c1">//
</span><span class="c1"></span>    <span class="c1">//                instance = new Bank();
</span><span class="c1"></span>    <span class="c1">//            }
</span><span class="c1"></span>    <span class="c1">//            return instance;
</span><span class="c1"></span>    <span class="c1">//        }
</span><span class="c1"></span>    <span class="c1">//æ–¹å¼äºŒï¼šæ•ˆç‡æ›´é«˜
</span><span class="c1"></span>    <span class="k">if</span><span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>

      <span class="kd">synchronized</span> <span class="o">(</span><span class="n">Bank</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">instance</span> <span class="o">==</span> <span class="kc">null</span><span class="o">){</span>

          <span class="n">instance</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Bank</span><span class="o">();</span>
        <span class="o">}</span>

      <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">instance</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="62-æ­»é”é—®é¢˜">6.2 æ­»é”é—®é¢˜</h3>
<p><strong>ä»€ä¹ˆå«æ­»é”ï¼Ÿ</strong>
ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹éœ€è¦çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå°±å½¢æˆäº†çº¿ç¨‹çš„æ­»é”</p>
<ul>
<li>å‡ºç°æ­»é”åï¼Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä¸ä¼šå‡ºç°æç¤ºï¼Œåªæ˜¯æ‰€çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ç»§ç»­</li>
<li>æˆ‘ä»¬ä½¿ç”¨åŒæ­¥æ—¶ï¼Œè¦é¿å…å‡ºç°æ­»é”ã€‚</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

  <span class="n">StringBuffer</span> <span class="n">s1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>
  <span class="n">StringBuffer</span> <span class="n">s2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuffer</span><span class="o">();</span>


  <span class="k">new</span> <span class="n">Thread</span><span class="o">(){</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>

      <span class="kd">synchronized</span> <span class="o">(</span><span class="n">s1</span><span class="o">){</span>

        <span class="n">s1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;a&#34;</span><span class="o">);</span>
        <span class="n">s2</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;1&#34;</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
          <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>


        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">s2</span><span class="o">){</span>
          <span class="n">s1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;b&#34;</span><span class="o">);</span>
          <span class="n">s2</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;2&#34;</span><span class="o">);</span>

          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
        <span class="o">}</span>


      <span class="o">}</span>

    <span class="o">}</span>
  <span class="o">}.</span><span class="na">start</span><span class="o">();</span>


  <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="k">new</span> <span class="n">Runnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
      <span class="kd">synchronized</span> <span class="o">(</span><span class="n">s2</span><span class="o">){</span>

        <span class="n">s1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;c&#34;</span><span class="o">);</span>
        <span class="n">s2</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;3&#34;</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">{</span>
          <span class="n">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="n">100</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kd">synchronized</span> <span class="o">(</span><span class="n">s1</span><span class="o">){</span>
          <span class="n">s1</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;d&#34;</span><span class="o">);</span>
          <span class="n">s2</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&#34;4&#34;</span><span class="o">);</span>

          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s1</span><span class="o">);</span>
          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">s2</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}).</span><span class="na">start</span><span class="o">();</span>


<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="7-çº¿ç¨‹é€šä¿¡">7. çº¿ç¨‹é€šä¿¡</h2>
<h3 id="71-çº¿ç¨‹é€šä¿¡æ¶‰åŠåˆ°çš„ä¸‰ä¸ªæ–¹æ³•">7.1 çº¿ç¨‹é€šä¿¡æ¶‰åŠåˆ°çš„ä¸‰ä¸ªæ–¹æ³•</h3>
<ul>
<li>wait()ï¼šä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹å°±è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œå¹¶é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ã€‚</li>
<li>notify()ï¼šä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå°±ä¼šå”¤é†’è¢«waitçš„ä¸€ä¸ªçº¿ç¨‹ã€‚å¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¢«waitï¼Œå°±å”¤é†’ä¼˜å…ˆçº§é«˜çš„é‚£ä¸ªã€‚</li>
<li>notifyAll()ï¼šä¸€æ—¦æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œå°±ä¼šå”¤é†’æ‰€æœ‰è¢«waitçš„çº¿ç¨‹ã€‚</li>
</ul>
<p>è¯´æ˜ï¼š</p>
<ol>
<li>wait()ï¼Œnotify()ï¼ŒnotifyAll()ä¸‰ä¸ªæ–¹æ³•å¿…é¡»ä½¿ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ã€‚</li>
<li>wait()ï¼Œnotify()ï¼ŒnotifyAll()ä¸‰ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…å¿…é¡»æ˜¯åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­çš„åŒæ­¥ç›‘è§†å™¨ã€‚å¦åˆ™ï¼Œä¼šå‡ºç°IllegalMonitorStateExceptionå¼‚å¸¸</li>
<li>wait()ï¼Œnotify()ï¼ŒnotifyAll()ä¸‰ä¸ªæ–¹æ³•æ˜¯å®šä¹‰åœ¨java.lang.Objectç±»ä¸­ã€‚</li>
</ol>
<h3 id="72-sleepå’Œwaitçš„å¼‚åŒ">7.2 sleep()å’Œwait()çš„å¼‚åŒ</h3>
<ul>
<li>ç›¸åŒç‚¹ï¼šä¸€æ—¦æ‰§è¡Œæ–¹æ³•ï¼Œéƒ½å¯ä»¥ä½¿å¾—å½“å‰çš„çº¿ç¨‹è¿›å…¥é˜»å¡çŠ¶æ€ã€‚</li>
<li>ä¸åŒç‚¹ï¼š
<ol>
<li>
<p>ä¸¤ä¸ªæ–¹æ³•å£°æ˜çš„ä½ç½®ä¸åŒï¼šThreadç±»ä¸­å£°æ˜sleep() , Objectç±»ä¸­å£°æ˜wait()</p>
</li>
<li>
<p>è°ƒç”¨çš„è¦æ±‚ä¸åŒï¼šsleep()å¯ä»¥åœ¨ä»»ä½•éœ€è¦çš„åœºæ™¯ä¸‹è°ƒç”¨ã€‚ wait()å¿…é¡»ä½¿ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­</p>
</li>
<li>
<p>å…³äºæ˜¯å¦é‡Šæ”¾åŒæ­¥ç›‘è§†å™¨ï¼šå¦‚æœä¸¤ä¸ªæ–¹æ³•éƒ½ä½¿ç”¨åœ¨åŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•ä¸­ï¼Œsleep()ä¸ä¼šé‡Šæ”¾é”ï¼Œwait()ä¼šé‡Šæ”¾é”ã€‚</p>
</li>
</ol>
</li>
</ul>
<h3 id="73-é‡Šæ”¾é”çš„æ“ä½œ">7.3 é‡Šæ”¾é”çš„æ“ä½œ</h3>
<p><img src="http://cdn.bearkchan.top/image-20210313151930632.png" alt="image-20210313151930632"></p>
<h3 id="74-ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ">7.4 ä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ</h3>
<p><img src="http://cdn.bearkchan.top/image-20210313151949265.png" alt="image-20210313151949265"></p>
<h2 id="8-jdk50æ–°å¢çº¿ç¨‹åˆ›å»ºçš„æ–¹å¼">8. JDK5.0æ–°å¢çº¿ç¨‹åˆ›å»ºçš„æ–¹å¼</h2>
<h3 id="81-æ–°å¢æ–¹å¼ä¸€å®ç°callableæ¥å£">8.1 æ–°å¢æ–¹å¼ä¸€ï¼šå®ç°Callableæ¥å£</h3>
<ol>
<li>åˆ›å»ºä¸€ä¸ªå®ç°Callableçš„å®ç°ç±»</li>
<li>å®ç°callæ–¹æ³•ï¼Œå°†æ­¤çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨call()ä¸­</li>
<li>åˆ›å»ºCallableæ¥å£å®ç°ç±»çš„å¯¹è±¡</li>
<li>å°†æ­¤Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°FutureTaskæ„é€ å™¨ä¸­ï¼Œåˆ›å»ºFutureTaskçš„å¯¹è±¡</li>
<li>å°†FutureTaskçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadå¯¹è±¡ï¼Œå¹¶è°ƒç”¨start()</li>
<li>è·å–Callableä¸­callæ–¹æ³•çš„è¿”å›å€¼</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="c1">//1.åˆ›å»ºä¸€ä¸ªå®ç°Callableçš„å®ç°ç±»
</span><span class="c1"></span><span class="kd">class</span> <span class="nc">NumThread</span> <span class="kd">implements</span> <span class="n">Callable</span><span class="o">{</span>
   <span class="c1">//2.å®ç°callæ–¹æ³•ï¼Œå°†æ­¤çº¿ç¨‹éœ€è¦æ‰§è¡Œçš„æ“ä½œå£°æ˜åœ¨call()ä¸­
</span><span class="c1"></span>   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="n">Object</span> <span class="nf">call</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
       <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
       <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
           <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
               <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
               <span class="n">sum</span> <span class="o">+=</span> <span class="n">i</span><span class="o">;</span>
           <span class="o">}</span>
       <span class="o">}</span>
       <span class="k">return</span> <span class="n">sum</span><span class="o">;</span>
   <span class="o">}</span>
<span class="o">}</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadNew</span> <span class="o">{</span>
   <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
       <span class="c1">//3.åˆ›å»ºCallableæ¥å£å®ç°ç±»çš„å¯¹è±¡
</span><span class="c1"></span>       <span class="n">NumThread</span> <span class="n">numThread</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NumThread</span><span class="o">();</span>
       <span class="c1">//4.å°†æ­¤Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡ä½œä¸ºä¼ é€’åˆ°FutureTaskæ„é€ å™¨ä¸­ï¼Œåˆ›å»ºFutureTaskçš„å¯¹è±¡
</span><span class="c1"></span>       <span class="n">FutureTask</span> <span class="n">futureTask</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FutureTask</span><span class="o">(</span><span class="n">numThread</span><span class="o">);</span>
       <span class="c1">//5.å°†FutureTaskçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’åˆ°Threadç±»çš„æ„é€ å™¨ä¸­ï¼Œåˆ›å»ºThreadå¯¹è±¡ï¼Œå¹¶è°ƒç”¨start()
</span><span class="c1"></span>       <span class="k">new</span> <span class="n">Thread</span><span class="o">(</span><span class="n">futureTask</span><span class="o">).</span><span class="na">start</span><span class="o">();</span>

       <span class="k">try</span> <span class="o">{</span>
           <span class="c1">//6.è·å–Callableä¸­callæ–¹æ³•çš„è¿”å›å€¼
</span><span class="c1"></span>           <span class="c1">//get()è¿”å›å€¼å³ä¸ºFutureTaskæ„é€ å™¨å‚æ•°Callableå®ç°ç±»é‡å†™çš„call()çš„è¿”å›å€¼ã€‚
</span><span class="c1"></span>           <span class="n">Object</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">futureTask</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
           <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;æ€»å’Œä¸ºï¼š&#34;</span> <span class="o">+</span> <span class="n">sum</span><span class="o">);</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
       <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ExecutionException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
           <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
       <span class="o">}</span>
   <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>è¯´æ˜ï¼šå¦‚ä½•ç†è§£å®ç°Callableæ¥å£çš„æ–¹å¼åˆ›å»ºå¤šçº¿ç¨‹æ¯”å®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹æ–¹å¼å¼ºå¤§ï¼Ÿ</p>
<ol>
<li>call()å¯ä»¥è¿”å›å€¼çš„ã€‚</li>
<li>call()å¯ä»¥æŠ›å‡ºå¼‚å¸¸ï¼Œè¢«å¤–é¢çš„æ“ä½œæ•è·ï¼Œè·å–å¼‚å¸¸çš„ä¿¡æ¯</li>
<li>Callableæ˜¯æ”¯æŒæ³›å‹çš„</li>
</ol>
</blockquote>
<h3 id="82-æ–°å¢æ–¹å¼äºŒä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼">8.2 æ–°å¢æ–¹å¼äºŒï¼šä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹å¼</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">NumberThread</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
      <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">==</span> <span class="n">0</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">NumberThread1</span> <span class="kd">implements</span> <span class="n">Runnable</span><span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span> <span class="o">&lt;=</span> <span class="n">100</span><span class="o">;</span><span class="n">i</span><span class="o">++){</span>
      <span class="k">if</span><span class="o">(</span><span class="n">i</span> <span class="o">%</span> <span class="n">2</span> <span class="o">!=</span> <span class="n">0</span><span class="o">){</span>
        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">().</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">&#34;: &#34;</span> <span class="o">+</span> <span class="n">i</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadPool</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">//1. æä¾›æŒ‡å®šçº¿ç¨‹æ•°é‡çš„çº¿ç¨‹æ± 
</span><span class="c1"></span>    <span class="n">ExecutorService</span> <span class="n">service</span> <span class="o">=</span> <span class="n">Executors</span><span class="o">.</span><span class="na">newFixedThreadPool</span><span class="o">(</span><span class="n">10</span><span class="o">);</span>
    <span class="n">ThreadPoolExecutor</span> <span class="n">service1</span> <span class="o">=</span> <span class="o">(</span><span class="n">ThreadPoolExecutor</span><span class="o">)</span> <span class="n">service</span><span class="o">;</span>
    <span class="c1">//è®¾ç½®çº¿ç¨‹æ± çš„å±æ€§
</span><span class="c1"></span>    <span class="c1">//        System.out.println(service.getClass());
</span><span class="c1"></span>    <span class="c1">//        service1.setCorePoolSize(15);
</span><span class="c1"></span>    <span class="c1">//        service1.setKeepAliveTime();
</span><span class="c1"></span>

    <span class="c1">//2.æ‰§è¡ŒæŒ‡å®šçš„çº¿ç¨‹çš„æ“ä½œã€‚éœ€è¦æä¾›å®ç°Runnableæ¥å£æˆ–Callableæ¥å£å®ç°ç±»çš„å¯¹è±¡
</span><span class="c1"></span>    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">NumberThread</span><span class="o">());</span><span class="c1">//é€‚åˆé€‚ç”¨äºRunnable
</span><span class="c1"></span>    <span class="n">service</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="k">new</span> <span class="n">NumberThread1</span><span class="o">());</span><span class="c1">//é€‚åˆé€‚ç”¨äºRunnable
</span><span class="c1"></span>
    <span class="c1">//        service.submit(Callable callable);//é€‚åˆä½¿ç”¨äºCallable
</span><span class="c1"></span>    <span class="c1">//3.å…³é—­è¿æ¥æ± 
</span><span class="c1"></span>    <span class="n">service</span><span class="o">.</span><span class="na">shutdown</span><span class="o">();</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></td></tr></table>
</div>
</div><p>è¯´æ˜ï¼šå¥½å¤„æœ‰ï¼š</p>
<ol>
<li>
<p>æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰</p>
</li>
<li>
<p>é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰</p>
</li>
<li>
<p>ä¾¿äºçº¿ç¨‹ç®¡ç†</p>
<ul>
<li>corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°</li>
<li>maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°</li>
<li>keepAliveTimeï¼šçº¿ç¨‹æ²¡ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢</li>
</ul>
</li>
</ol>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">Bearkchan</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2021-03-13
        
    </span>
  </p>
  
  
</div>
<footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/java/">java</a>
          <a href="/tags/%E9%94%81/">é”</a>
          <a href="/tags/%E5%90%8C%E6%AD%A5/">åŒæ­¥</a>
          <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">å¤šçº¿ç¨‹</a>
          </div>
      <nav class="post-nav">
        
        <a class="next" href="/post/javaweb%E9%98%B6%E6%AE%B5/002-redis/">
            <span class="next-text nav-default">Redisçš„åŸºæœ¬ä½¿ç”¨</span>
            <span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:bearkchan@gmail.com" class="iconfont icon-email" title="email"></a>
      <a href="http://github.com/bearkchan" class="iconfont icon-github" title="github"></a>
  <a href="https://bearkchan.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>Bearkchan-<a href='https://beian.miit.gov.cn'>è‹ICPå¤‡2020053789å·</a></span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c99b103c33d1539acf3025e1913697534542c4a5aa5af0ccc20475ed2863603b.js"></script>








</body>
</html>
